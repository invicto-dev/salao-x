generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Configuracoes {
  id                 String   @id @default(uuid())
  
  // Informações da Empresa
  nomeEmpresa        String
  cnpj               String   @unique
  endereco           String
  bairro             String
  cidade             String
  cep                String
  telefone           String
  email              String   @unique
  site               String?

  // Configurações de Negócio
  horarioFuncionamento Json     // Armazena Record<DiaSemana, Horario>
  intervaloPadrao     Int       // minutos
  antecedenciaMinima  Int       // minutos

  // Notificações
  notificarAgendamentos  Boolean
  notificarEstoqueBaixo  Boolean
  notificarAniversarios  Boolean
  whatsappAtivo          Boolean
  emailAtivo             Boolean

  // Sistema
  backupAutomatico    Boolean
  manterHistorico     Int      // meses
  timezone            String

  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt
}

model Funcionarios {
  id                 String   @id @default(uuid())
  nome               String
  email              String   @unique
  telefone           String
  funcao             String
  comissao           Int
  ativo              Boolean

  createdAt          DateTime @default(now())
  updatedAt          DateTime @updatedAt
}

model Customer {
  id                 String   @id @default(uuid())
  nome               String
  telefone           String
  email              String?  @unique
  cpf                String?  @unique
  aniversario        String?
  observacoes        String?  
  ativo              Boolean  @default(true)

  createdAt          DateTime @default(now())
  updatedAt          DateTime @updatedAt
}

model Product {
  id                 String   @id @default(uuid())
  nome               String
  codigo             String?   @unique
  categoria          String?
  preco              Float
  custo              Float
  contarEstoque      Boolean  @default(true)
  estoque            Int?
  ativo              Boolean  @default(true)
  descricao          String?

  createdAt          DateTime @default(now())
  updatedAt          DateTime @updatedAt
}

model Service {
  id                 String   @id @default(uuid())
  nome               String
  codigo             String?   @unique
  categoria          String?
  valorEmAberto      Boolean  @default(false)
  preco              Float?
  duracao            Int?
  ativo              Boolean  @default(true)
  descricao          String?

  createdAt          DateTime @default(now())
  updatedAt          DateTime @updatedAt
}
